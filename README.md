<p align="center">
  <img src="/docs/images/typechain-logo.png" width="300" alt="TypeChain">
  <p align="center">🔌 TypeScript bindings for Ethereum smart contracts</p>
</p>

## Fork notice

TypeChain has been developed by Kris Kaczor (krzkaczor). Thank you for all your work, Kris!

Since the
[original project has been deprecated](https://github.com/dethcrypto/TypeChain?tab=readme-ov-file#soft-deprecation-notice),
we've created this fork to get some critical bugfixes in.

### License

MIT | Kris Kaczor (krzkaczor) | [Github](https://github.com/krzkaczor) | [Twitter](https://twitter.com/krzkaczor)

## Features ⚡

- static typing - you will never call not existing method again
- IDE support - works with any IDE supporting Typescript
- frictionless - works with simple, JSON ABI files as well as with Truffle/Hardhat artifacts

## Installation

```bash
npm install --save-dev typechain
```

You will also need to install a desired target for example `@gnosis-guild/typechain-ethers-v6`.
[Learn more about targets](#targets-)

_Take note, that code generated by TypeChain requires TypeScript version 4.3 or newer._

## Packages 📦

| Package                                                           | Version                                                                                                                                       | Description                                  | Examples                             |
| ----------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------- | ------------------------------------ |
| [`typechain`](/packages/typechain)                                | [![npm](https://img.shields.io/npm/v/typechain.svg)](https://www.npmjs.com/package/typechain)                                                 | Core package                                 | -                                    |
| [`@gnosis-guild/typechain-ethers-v5`](/packages/target-ethers-v5) | [![npm](https://img.shields.io/npm/v/@gnosis-guild/typechain-ethers-v5.svg)](https://www.npmjs.com/package/@gnosis-guild/typechain-ethers-v5) | Ethers ver 5 support (⚠️ requires TS 4.0 >=) | [example](./examples/ethers-v5)      |
| [`@gnosis-guild/typechain-ethers-v6`](/packages/target-ethers-v6) | [![npm](https://img.shields.io/npm/v/@gnosis-guild/typechain-ethers-v6.svg)](https://www.npmjs.com/package/@gnosis-guild/typechain-ethers-v6) | Ethers ver 6 support (⚠️ requires TS 4.0 >=) | [example](./examples/ethers-v6)      |
| [`@gnosis-guild/typechain-hardhat`](/packages/hardhat)            | [![npm](https://img.shields.io/npm/v/@gnosis-guild/typechain-hardhat.svg)](https://www.npmjs.com/package/@gnosis-guild/typechain-hardhat)     | Hardhat plugin                               | [example-ethers](./examples/hardhat) |

### eth-sdk

TypeChain generates only TypeScript typings (`d.ts`) files, if you're looking for "opinionated", "batteries included"
solution check out our new project: [eth-sdk](https://github.com/dethcrypto/eth-sdk). It generates typesafe, ready to
use ethers.js wrappers and uses etherscan/sourcify to automatically get ABIs based only on smart contract addresses.
Under the hood, `eth-sdk` relies on `TypeChain`.

## Usage

### CLI

_Note: If you use hardhat just use
[hardhat plugin](https://github.com/gnosisguild/TypeChain/tree/master/packages/hardhat)._

```
typechain --target=(ethers-v5|ethers-v6) [glob]
```

- `glob` - pattern that will be used to find ABIs, remember about adding quotes: `typechain "**/*.json"`, examples:
  `./abis/**/*.abi`, `./abis/?(Oasis.abi|OasisHelper.abi)`.
- `--target` - ethers-v5, ethers-v6, truffle-v4, truffle-v5, web3-v1 or path to your custom target. Typechain will try
  to load package named: `@gnosis-guild/typechain-${target}`, so make sure that desired package is installed.
- `--out-dir` (optional) - put all generated files to a specific dir.
- `--always-generate-overloads` (optional) - some targets won't generate unnecessary types for overloaded functions by
  default, this option forces to always generate them
- `--discriminate-types` (optional) - ethers-v5 and ethers-v6 will add an artificial field `contractName` that helps
  discriminate between contracts

TypeChain always will rewrite existing files. You should not commit them. Read more in FAQ section.

Example:

```
typechain --target ethers-v6 --out-dir app/contracts './node_modules/neufund-contracts/build/contracts/*.json'
```

## Videos

- [Devcon5 Video (2019)](https://www.youtube.com/watch?v=Ho4dGNKVkTE)

## Getting started 📚

### Motivation

Interacting with blockchain in Javascript is a pain. Developers need to remember not only a name of a given smart
contract method or event but also it's full signature. This wastes time and might introduce bugs that will be triggered
only in runtime. TypeChain solves these problems (as long as you use TypeScript).

### How does it work?

TypeChain is a code generator - provide ABI file and name of your blockchain access library (ethers/truffle/web3.js) and
you will get TypeScript typings compatible with a given library.

### Step by step guide

Install TypeChain with `npm install --save-dev typechain` and install desired target.

Run `typechain --target=your_target` (you might need to make sure that it's available in your path if you installed it
only locally), it will automatically find all `.abi` files in your project and generate Typescript classes based on
them. You can specify your glob pattern: `typechain --target=your_target "**/*.abi.json"`. `node_modules` are always
ignored. We recommend git ignoring these generated files and making typechain part of your build process.

That's it! Now, you can simply import typings, check out our examples for more details.

## Targets 🎯

### Ethers.js v6

Use `ethers-v6` target to generate wrappers for [ethers.js](https://github.com/ethers-io/ethers.js/) lib. To make it
work great with Hardhat, use [Hardhat plugin](https://github.com/gnosisguild/TypeChain/tree/master/packages/hardhat).

If you use `nodenext` aka `node16modules` flip the flag `--node16-modules` to generate compatible typings.

If you are using Ethers.js v5, use the `@gnosis-guild/typechain-ethers-v5` target.

If you're using Ethers.js v4, you can find legacy `@gnosis-guild/typechain-ethers-v4` target on
[npm](https://www.npmjs.com/package/@gnosis-guild/typechain-ethers-v4) and commit
[`db551b5`](https://github.com/dethcrypto/TypeChain/tree/db551b5c5f70e86f3ca342551e9e0369d099cfa2).

### NatSpec support

If you provide solidity artifacts rather than plain ABIs as an input, TypeChain can generate NatSpec comments directly
to your typings which enables simple access to docs while coding.

## FAQ 🤔

### Q: Should I commit generated files to my repository?

A: _NO_ — we believe that no generated files should go to git repository. You should git ignore them and make
`typechain` run automatically for example in post install hook in package.json:

```
"postinstall":"typechain"
```

When you update ABI, just regenerate files with TypeChain and Typescript compiler will find any breaking changes for
you.

### Q: How do I customize generated code?

A: You can create your own target and generate basically any code.

### Q: Generated files won't match current codestyle of my project :(

A: We will automatically format generated classes with `prettier` to match your coding preferences (just make sure to
use `.prettierrc` file).

Furthermore, TypeChain will silent `eslint` and `tslint` errors for generated files.

### Usage as API

```typescript
import { runTypeChain, glob } from 'typechain'

async function main() {
  const cwd = process.cwd()
  // find all files matching the glob
  const allFiles = glob(cwd, [`${config.paths.artifacts}/!(build-info)/**/+([a-zA-Z0-9_]).json`])

  const result = await runTypeChain({
    cwd,
    filesToProcess: allFiles,
    allFiles,
    outDir: 'out directory',
    target: 'target name',
  })
}

main().catch(console.error)
```

If you don't care about incremental generation just specify the same set of files for `filesToProcess` and `allFiles`.
For incremental generation example read the source code of
[hardhat plugin](https://github.com/gnosisguild/TypeChain/blob/master/packages/hardhat/src/index.ts).

# Contributing

Check out our [contributing guidelines](./CONTRIBUTING.md)

# Licence

Kris Kaczor (krzkaczor) MIT | [Github](https://github.com/krzkaczor) | [Twitter](https://twitter.com/krzkaczor)
